<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Inscription Information</title>
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body>
    <header>
      <nav class="Navbar--main">
        <div class="sc-29427738-0 sc-aa344ffa-5 ktOAPP lenEFM">
            <div height="40" width="40" class="sc-29427738-0 dFYEpK">
              <img alt="Orkar.io Logo" src="https://media.discordapp.net/attachments/933585220114972752/1074176618253254676/OrkarLogo.png" width="40" height="40">
            </div>
          </a>
          <div class="sc-29427738-0 sc-630fc9ab-0 hxKAFa jSPhMX">
            <strong>Orkar.io</strong>
          
        </div>
        <form action="#" onsubmit="searchInscription(event); return false;">
          <div class="search-container">
            <input type="text" id="inscriptionId" name="inscriptionid" placeholder="Search Inscription ID">
            <button type="submit">
              <i class="fa fa-search"></i>
            </button>
          </div>
        </form>
        </div>
      </nav>
    </header>

    <h1>Inscription Information</h1>

    <div id="inscriptionInfo"></div>
    <div id="errorMessage" style="display: none;">There was an error fetching the inscription information. Please try again later.</div>

<script>
  const form = document.querySelector("form");

  function searchInscription(event) {
  const inscriptionId = document.getElementById("inscriptionId").value;
  history.pushState({}, '', '?inscriptionid=' + encodeURIComponent(inscriptionId));
  getSite()
}

  function getSite() {
    let urlParams = new URLSearchParams(window.location.search);
    let inscriptionId = urlParams.get('inscriptionid');
    if (inscriptionId) {
      const url = `https://ordapi.xyz/inscription/${inscriptionId}`;
      getData(url)
      console.log(url)
    }
  }

window.addEventListener("load", getSite);

    function getData(url) {
      fetch(url)
        .then(response => response.json())
        .then(inscriptionData => {

        // Display the inscription data in the "inscriptionInfo" div
        const inscriptionInfoDiv = document.querySelector("#inscriptionInfo");
        inscriptionInfoDiv.innerHTML = `
        <div id="inscriptionInfo">
          <div style="display: flex;">
            <img src="https://ordinals.com${inscriptionData["content"]}" alt="Inscription Image" style="width: 338.656px; height: 338.656px;">
  <div style="margin-left: 10px;">
    <h2>${inscriptionData.title}</h2>
    <p class="address">Owned By: <a href="https://www.blockchain.com/explorer/addresses/btc/${inscriptionData["address"]}" style="color: gray; text-decoration: none; font-weight: bold; font-size: smaller;">
      ${inscriptionData["address"].substr(0, 5)}-${inscriptionData["address"].substr(-5)}
    </a></p>
  </div>
</div>
<div style="width: 670px; border: 4px solid #191a1b; padding: 10px; margin-top: 10px; margin-left: 10px; border-radius: 10px;">
  <p style="font-size: 18px; font-weight: bold;">ID: <span style="color: dimgray; font-weight: bold;">${inscriptionData["id"]}</span></p>
  <hr style="border: 1px solid black;">
  <p style="font-size: 18px; font-weight: bold;">Sat: <span style="color: dimgray; font-weight: bold;">${inscriptionData["sat"]}</span></p>
  <hr style="border: 1px solid black;">
  <p style="font-size: 18px; font-weight: bold;">Content Length: <span style="color: dimgray; font-weight: bold;">${inscriptionData["content length"]}</span></p>
  <hr style="border: 1px solid black;">
  <p style="font-size: 18px; font-weight: bold;">Genesis Fee: <span style="color: dimgray; font-weight: bold;">${inscriptionData["genesis fee"]}</span></p>
  <hr style="border: 1px solid black;">
  <p style="font-size: 18px; font-weight: bold;">Genesis Height: <a href="https://www.blockchain.com/explorer/blocks/btc/${inscriptionData["genesis height"].split("/")[2]}" target="_blank" style="color: dimgray; font-weight: bold; text-decoration: none;">${inscriptionData["genesis height"].split("/")[2]}</a></p>
  <hr style="border: 1px solid black;">
  <p style="font-size: 18px; font-weight: bold;">Genesis Transaction: <span style="color: dimgray; font-weight: bold;">${inscriptionData["genesis transaction"]}</span></p>
  <hr style="border: 1px solid black;">
  <p style="font-size: 18px; font-weight: bold;">Location: <span style="color: dimgray; font-weight: bold;">${inscriptionData["location"]}</span></p>
  <hr style="border: 1px solid black;">
  <p style="font-size: 18px; font-weight: bold;">Offset: <span style="color: dimgray; font-weight: bold;">${inscriptionData["offset"]}</span></p>
  <hr style="border: 1px solid black;">
  <p style="font-size: 18px; font-weight: bold;">Output Value: <span style="color: dimgray; font-weight: bold;">${inscriptionData["output value"]}</span></p>
  <hr style="border: 1px solid black;">
  <p style="font-size: 18px; font-weight: bold;">Location: <span style="color: dimgray; font-weight: bold;">${inscriptionData["location"]}</span></p>

<hr style="border: 1px solid black;">
<p style="font-size: 18px; font-weight: bold;">Offset: <span style="color: dimgray; font-weight: bold;">${inscriptionData["offset"]}</span></p>
<hr style="border: 1px solid black;">
<p style="font-size: 18px; font-weight: bold;">Output Value: <span style="color: dimgray; font-weight: bold;">${inscriptionData["output value"]}</span></p>
<hr style="border: 1px solid black;">
<p style="font-size: 18px; font-weight: bold;">Timestamp: <span style="color: dimgray; font-weight: bold;">${inscriptionData["timestamp"]}</span></p>
</div>

      </div>
    
    <div>
      
      <style>
  .address {
    font-size: 14px;
    font-weight: bold;
    color: lightgray;
    margin-top: -20px;
  }
</style>



        `;
      });
    }

</script>
</body>
</html>